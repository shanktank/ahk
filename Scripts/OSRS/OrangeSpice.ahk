#Include %A_MyDocuments%/Git/ahk/Libraries/OSRS.ahk

#SingleInstance FORCE
#Persistent
#NoEnv
#Warn

SetWorkingDir, %A_ScriptDir%
CoordMode, ToolTip, Screen
CoordMode, Mouse, Screen
CoordMode, Pixel, Screen
SetTitleMatchMode, RegEx
SendMode, Input

#IfWinActive ^(RuneLite|OpenOSRS)$

;; ============================================================================================================================================================ ;;
;; == Functions =============================================================================================================================================== ;;
;; ============================================================================================================================================================ ;;

main() {
	Local result := []

	While(True) {
		ToolTip, Monitoring, 0, 0
		
		result := CatLowHp.findPixelByColor()
		
		If(result.rc == 0) {
			ToolTip, Feeding, 0, 0
			
			InvSlot1Bounds.moveMouseAndClick()
			Curtain.moveMouseAndClick()
		}
		
		Sleep, 500
	}
}

;; ============================================================================================================================================================ ;;
;; == Global Variables ======================================================================================================================================== ;;
;; ============================================================================================================================================================ ;;

;Global CatHpBar := New PixelColorLocation(0xB40009, [ 775, 569 ])
;Global CatLowHp := New TileMarkerBounds(0xB40009, [784, 625], [800, 606], 2)
Global CatLowHp := New TileMarkerBounds(0xB40009, [841, 623], [855, 606], 2)
Global Curtain  := New ClickAreaBounds([788, 574], [801, 607])
Global GotSpice := New PixelColorLocation(0xC58647, [102, 926])

;; ============================================================================================================================================================ ;;
;; == Hotkeys ================================================================================================================================================= ;;
;; ============================================================================================================================================================ ;;

F1::main()

#If
^R::Reload
+^C::ExitApp
